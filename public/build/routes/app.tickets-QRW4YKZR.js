import{a as H}from"/build/_shared/chunk-4TIXQRW4.js";import{a as ae}from"/build/_shared/chunk-P6LHMONY.js";import{a as ee,c as L,d as U,e as B,f as A,g as T,h as S,j as $,n as G,p as N,r as W,s as O,t as te}from"/build/_shared/chunk-KEBXNG35.js";import{a as _,c as V,g as M,l as F}from"/build/_shared/chunk-PVHEWPT3.js";import{c as v}from"/build/_shared/chunk-Q3IECNXJ.js";var oe=v(ee(),1);var k=v(_(),1),ne=v(te(),1),le=v(ae(),1);function J(){let{tickets:K,total:X,page:f,totalPages:w,currentStatus:Y}=F(),[C,P]=M(),I=V(),[b,R]=(0,k.useState)(null),[x,D]=(0,k.useState)(""),Z=(0,k.useCallback)(e=>{let t=new URLSearchParams(C);e==="all"?t.delete("status"):t.set("status",e),t.set("page","1"),P(t)},[C,P]),Q=(0,k.useCallback)(e=>{let t=new URLSearchParams(C);t.set("page",e.toString()),P(t)},[C,P]),E=K.filter(e=>{if(!x)return!0;let t=x.toLowerCase();return e.id.toLowerCase().includes(t)||e.shopifyOrderName.toLowerCase().includes(t)||e.buyerEmail.toLowerCase().includes(t)||e.productTitle.toLowerCase().includes(t)});return<W title="All Tickets"subtitle={`${X} total tickets`}backAction={{content:"Dashboard",onAction:()=>I("/app")}}primaryAction={{content:"Export CSV",onAction:()=>I("/app/export")}}><S gap="400"><A><S gap="400"><T gap="400"wrap={!1}><div style={{flexGrow:1}}><$ label="Search"value={x}onChange={D}placeholder="Search by ticket ID, order, email, or product"autoComplete="off"clearButton onClearButtonClick={()=>D("")}/></div><div style={{minWidth:"200px"}}><O label="Status"options={[{label:"All",value:"all"},{label:"Pending",value:"PENDING"},{label:"Valid",value:"VALID"},{label:"Scanned",value:"SCANNED"},{label:"Invalid",value:"INVALID"},{label:"Cancelled",value:"CANCELLED"}]}value={Y}onChange={Z}/></div></T></S></A><A><S gap="400">{E.length===0?<B padding="800"><L as="p"variant="bodyLg"tone="subdued"alignment="center">No tickets found</L></B>:<S gap="400">{E.map(e=><H key={e.id}ticket={e}onViewQR={R}/>)}</S>}{w>1&&<T align="center"><G hasPrevious={f>1}onPrevious={()=>Q(f-1)}hasNext={f<w}onNext={()=>Q(f+1)}label={`Page ${f} of ${w}`}/></T>}</S></A></S><N open={b!==null}onClose={()=>R(null)}title="Ticket QR Code"><N.Section><B padding="400"><S gap="400"inlineAlign="center">{b&&<img src={b}alt="QR Code"style={{maxWidth:"400px",width:"100%",height:"auto"}}/>}<L as="p"variant="bodySm"tone="subdued"alignment="center">Scan this QR code at the event entrance</L><U onClick={()=>{let e=document.createElement("a");e.href=b||"",e.download="ticket-qr-code.png",e.click()}}>Download QR Code</U></S></B></N.Section></N></W>}export{J as default};
